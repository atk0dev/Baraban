var module=angular.module("catalogIndex",[]),catalogController,itemController;module.config(["$routeProvider",function(n){n.when("/",{controller:"catalogController",templateUrl:"/templates/catalogView.html"});n.when("/group/:gid",{controller:"catalogController",templateUrl:"/templates/catalogView.html"});n.when("/group/:gid/item/:iid",{controller:"itemController",templateUrl:"/templates/itemView.html"});n.otherwise({redirectTo:"/"})}]);module.factory("dataService",["$http","$q",function(n,t){function o(n){var t=null;return $.each(i,function(i,r){if(r.id==n)return t=r,!1}),t}var i=[],r=[],u=!1,f={},s=function(){return u},e=function(e){var o=t.defer(),s="/api/v1/catalogdata/"+e;return console.log("getting items: "+s),n.get(s).then(function(n){var e,h;angular.copy(n.data.items,i);angular.copy(n.data.group,f);var s=[],c=Math.ceil(n.data.items.length/3),t=0;for(e=0;e<c;e++)h=n.data.items.slice(t,t+3),s.push(h),t=t+3;angular.copy(s,r);u=!1;o.resolve()},function(){o.reject()}),o.promise},h=function(n,r){var u=t.defer(),f;return i.length>0?(f=o(n),f?u.resolve(f):u.reject()):e(r).then(function(){var t=o(n);t?u.resolve(t):u.reject()},function(){u.reject()}),u.promise},c=function(i){var r=t.defer(),u="/api/v1/details/"+i;return n.get(u).then(function(n){r.resolve(n.data)},function(){r.reject()}),r.promise};return{items:i,getItems:e,getItem:h,getDetails:c,isReady:s,rows:r,currGroup:f}}]);catalogController=["$scope","dataService","$window","$routeParams",function(n,t,i,r){n.data=t;n.isBusy=!1;var u=0;r!=undefined&&r.gid!=undefined&&(u=r.gid);n.cg=u;t.isReady()==!1&&(n.isBusy=!0,console.log("group = "+u),t.getItems(u).then(function(){console.log(n.data);console.log(n.data.currGroup)},function(){alert("could not load items")}).then(function(){n.isBusy=!1}))}];itemController=["$scope","dataService","$window","$routeParams",function(n,t,i,r){n.item=null;n.isBusy=!1;var u=0,f=0;r!=undefined&&r.gid!=undefined&&(u=r.gid);r!=undefined&&r.iid!=undefined&&(f=r.iid);t.getItem(f,u).then(function(i){n.item=i;n.cg=u;t.getDetails(i.id).then(function(t){n.details=t},function(){alert("unable to load details")})},function(){alert("could not load item")}).then(function(){n.isBusy=!1})}];
/*
//# sourceMappingURL=catalog-index.min.js.map
*/